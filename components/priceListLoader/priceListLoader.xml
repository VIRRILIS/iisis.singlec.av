<?xml version="1.0" encoding="UTF-8"?>
<form xsi:schemaLocation="iisis/schemas/2014/projects/singlec/iis/form ../../../../../schemas/2014/projects/singlec/iis/form/form.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns="iisis/schemas/2014/projects/singlec/iis/form" description="Загрузка прайсов">

    <panel>
        <pageList>
            <page>
                <controlList>
                    <commandBar ID="commandBar"
                                height="20"
                                linkL="panel"
                                linkR="panel"
                                linkT="panel">
                        <buttonList>
                            <button type="Action" description="Загрузить">
                                <eventGroup>
                                    <event name="$CommandBarButtonClick">
                                        <event name="TableBoxStatisticsLoadDataPackage"
                                               class="$control:ID:tableBoxStatistics"/>
                                    </event>
                                </eventGroup>
                            </button>
                            <button type="Separator"/>
                            <button type="Action" description="Документы">
                                <eventGroup>
                                    <event name="$CommandBarButtonClick">
                                        <event class="iis.form" name="OpenNew">
                                            <parameterList>
                                                <parameter name="cd.cDocumentList"/>
                                                <parameter name="$form"/>
                                            </parameterList>
                                        </event>
                                    </event>
                                </eventGroup>
                            </button>
                            <button type="Action" description="Настройки загрузки">
                                <eventGroup>
                                    <event name="$CommandBarButtonClick">
                                        <event class="iis.form" name="OpenNew">
                                            <parameterList>
                                                <parameter name="cd.cdplList.formList.cdplList"/>
                                            </parameterList>
                                        </event>
                                    </event>
                                </eventGroup>
                            </button>
                            <button type="Action" description="Профили подключения">
                                <eventGroup>
                                    <event name="$CommandBarButtonClick">
                                        <event class="iis.form" name="OpenNew">
                                            <parameterList>
                                                <parameter name="iis.cProfileList"/>
                                                <parameter name="$form"/>
                                            </parameterList>
                                        </event>
                                    </event>
                                </eventGroup>
                            </button>
                        </buttonList>
                    </commandBar>
                    <panel ID="selections"
                           linkL="panel"
                           linkT="commandBar.linkB."
                           linkR="splitter.linkL."
                           linkB="panel"
                           width="50%">
                        <pageList>
                            <page>
                                <controlList>
                                    <objectListOptions
                                            ID="objectListOptions"
                                            linkL="panel"
                                            linkR="panel"
                                            linkB="splitter1.linkT."
                                            linkT="panel"
                                            height="40%">
                                        <fieldList>
                                            <field fieldName="Date" description="Дата" valueType="iis-sql:dateTime"
                                                   useComparison="0"/>
                                            <field fieldName="Organization" description="Организация"
                                                   valueType="$CatalogRef.Организации" useComparison="0"/>
                                            <field fieldName="LoadNewDataPackage" description="Загружать новые"
                                                   valueType="iis-sql:boolean" useComparison="0"/>
                                            <field fieldName="Source" description="Источник"
                                                   valueType="iis-sql:string_50" useComparison="0"/>
                                        </fieldList>
                                        <eventGroup>
                                            <event name="@ObjectListOptionsGetFilterListMap">
                                                <event name="@ObjectListOptionsGetFilterListMap"/>
                                            </event>
                                        </eventGroup>
                                    </objectListOptions>
                                    <splitter ID="splitter1"
                                              linkL="panel"
                                              linkT="objectListOptions.linkB."
                                              linkB="cdplList.linkT."
                                              linkR="panel"
                                              height="2"/>
                                    <tableBox ID="cdplList"
                                              linkL="panel"
                                              linkT="splitter1.linkT."
                                              linkR="panel"
                                              linkB="panel">
                                        <fieldList></fieldList>
                                    </tableBox>
                                </controlList>
                            </page>
                        </pageList>
                    </panel>
                    <splitter ID="splitter"
                              linkL="selections.linkR."
                              linkT="commandBar.linkB."
                              linkB="panel"
                              linkR="panelPriceList.linkL."
                              width="2"/>
                    <panel ID="panelPriceList"
                           linkL="splitter.linkL."
                           linkR="panel"
                           linkT="commandBar.linkB."
                           linkB="panel">
                        <pageList>
                            <page>
                                <controlList>
                                    <tableBox
                                            ID="tableBoxStatistics"
                                            linkB="panel"
                                            linkL="panel"
                                            linkR="panel"
                                            linkT="panel"
                                            valueType="@function:av.priceListLoader|||TableBoxStatisticListGetBean">
                                        <fieldList>
                                            <field data="CDocumentComment" description="Комментарий" width="3"/>
                                            <field data="CDocumentSender" description="Контрагент" width="3"/>
                                            <field data="DataPackageSender" description="Почта" width="3"/>
                                            <field data="CDPLDescription" description="Настройка" width="3"/>
                                        </fieldList>
                                        <eventGroup>
                                            <event name="$TableBoxSelection"/>
                                            <event name="$TableBoxBeforeAddRow"/>
                                            <event name="TableBoxStatisticsLoadDataPackage">
                                                <event name="@ObjectListOptionsGetFilterListMap"
                                                       class="$control:ID:objectListOptions"/>

                                                <event name="TableBoxStatisticsLoadDataPackage">
                                                    <parameterList>
                                                        <parameter name="$control"/>
                                                        <parameter name="@FilterListMap"/>
                                                    </parameterList>
                                                </event>

                                            </event>
                                        </eventGroup>
                                    </tableBox>
                                </controlList>
                            </page>
                        </pageList>
                    </panel>
                </controlList>
            </page>
        </pageList>
    </panel>
    <eventGroup>
        <event name="$FormBeforeClose">
            <event name="@FormBeforeClose"/>
        </event>
    </eventGroup>
</form>
